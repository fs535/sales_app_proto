<div class="top-container container-fluid">
    <h2 *ngIf="offerType[0].id == 'New'">New Offers</h2>
    <h2 *ngIf="offerType[0].id != 'New' && (offerCategory1 || offerCategory2 || offerCategory3 || offerPrice || offerBrand || offerSize)">Offers for Products with:
        {{offerCategory1 == '' ? '' : offerCategory1}} {{offerCategory2 == '' ? '' : offerCategory2}} {{offerCategory3 == '' ? '' : offerCategory3}} {{offerBrand == '' ? '' : offerBrand}} {{offerPrice == '' ? '' : offerPrice}} {{offerSize == '' ? '' : offerSize}}</h2>
    <h2 *ngIf="offerType[0].id != 'New' && !(offerCategory1 || offerCategory2 || offerCategory3 || offerPrice || offerBrand || offerSize)">Offers</h2>
    <div class="error" *ngIf="error">{{error}}</div>
    <div class="row">
        <div class="form-group col-md-2">
            <ng-select [allowClear]="true"
                       [items]="category1values"
                       [disabled]="offerType[0].id == 'New'"
                       (selected)="onOfferCategory1Select($event)"
                       (removed)="onOfferCategory1Select({'id':'','text':''})"
                       placeholder="Category1...">
            </ng-select>
        </div>
        <div class="form-group col-md-2">
            <ng-select [allowClear]="true"
                       [items]="category2values"
                       [disabled]="offerType[0].id == 'New'"
                       (selected)="onOfferCategory2Select($event)"
                       (removed)="onOfferCategory2Select({'id':'','text':''})"
                       placeholder="Category2...">
            </ng-select>
        </div>
        <div class="form-group col-md-2">
            <ng-select [allowClear]="true"
                       [items]="category3values"
                       [disabled]="offerType[0].id == 'New'"
                       (selected)="onOfferCategory3Select($event)"
                       (removed)="onOfferCategory3Select({'id':'','text':''})"
                       placeholder="Category3...">
            </ng-select>
        </div>
        <div class="form-group col-md-2">
            <ng-select [allowClear]="true"
                       [items]="brands"
                       [disabled]="offerType[0].id == 'New'"
                       (selected)="onOfferBrandSelect($event)"
                       (removed)="onOfferBrandSelect({'id':'','text':''})"
                       placeholder="Brand...">
            </ng-select>
        </div>
        <div class="form-group col-md-2">
            <ng-select [allowClear]="true"
                       [items]="prices"
                       [disabled]="offerType[0].id == 'New'"
                       (selected)="onOfferPriceSelect($event)"
                       (removed)="onOfferPriceSelect({'id':'','text':''})"
                       placeholder="Price...">
            </ng-select>
        </div>
        <div class="form-group col-md-2">
            <ng-select [allowClear]="true"
                       [items]="sizes"
                       [disabled]="offerType[0].id == 'New'"
                       (selected)="onOfferSizeSelect($event)"
                       (removed)="onOfferSizeSelect({'id':'','text':''})"
                       placeholder="Size...">
            </ng-select>
        </div>
        <div class="form-group col-md-2">
            <ng-select [allowClear]="false"
                       [items]="offerTypes"
                       [active]="offerType"
                       (selected)="onOfferTypeSelect($event)">
            </ng-select>
        </div>
    </div>
    <div class="row">
        <div class="form-group col-md-2">
            <button class="btn btn-default" (click)="addOffer()">New Offer...</button>
        </div>
    </div>
    <div *ngIf="addingOffer">
        <table class="table table-striped top-container-table">
            <thead>
            <th class="th1">Id</th>
            <th class="th2">Name</th>
            <th class="th3">Comb Type</th>
            <th class="th4">Demand ID</th>
            <th class="th5">Demand Count</th>
            <th class="th6">Benefit ID</th>
            <th class="th7">Discount</th>
            <th class="th8">Comb Max</th>
            <th class="th9">Valid From</th>
            <th class="th10">Valid To</th>
            <th></th>
            <th class="thlast">Suspended?</th>
            </thead>
            <tbody>
            <tr [class.selected]="true">
                <td class="td1">
                    <input [class.selected]="true" class="wide"
                           type="text"
                           [(ngModel)]="offer.id"/>
                </td>
                <td class="td2">
                    <input [class.selected]="true" class="wide"
                           type="text"
                           [(ngModel)]="offer.name"/>
                </td>
                <td class="td3">
                    <input [class.selected]="true" class="wide"
                           type="text"
                           [(ngModel)]="offer.combType"/>
                </td>
                <td class="td4">
                    <input [class.selected]="true" class="wide"
                           type="text"
                           [(ngModel)]="offer.demandId"/>
                </td>
                <td class="td5">
                    <input [class.selected]="true" class="wide"
                           type="text"
                           [(ngModel)]="offer.demandCount"/>
                </td>
                <td class="td6">
                    <input [class.selected]="true" class="wide"
                           type="text"
                           [(ngModel)]="offer.benefitId"/>
                </td>
                <td class="td7">
                    <input [class.selected]="true" class="wide"
                           type="text"
                           [(ngModel)]="offer.discount"/>
                </td>
                <td class="td8">
                    <input [class.selected]="true" class="wide"
                           type="text"
                           [(ngModel)]="offer.combMax"/>
                </td>
                <td class="td9">
                    <input [class.selected]="true" class="wide"
                           type="text"
                           [(ngModel)]="offer.validFrom"/>
                </td>
                <td class="td10">
                    <input [class.selected]="true" class="wide"
                           type="text"
                           [(ngModel)]="offer.validTo"/>
                </td>
                <td></td>
                <td class="tdlast">
                    <md-slide-toggle [class.selected]="true" [(ngModel)]="offer.suspended" (ngModelChange)="onNewOfferSuspendedChange($event, offer)">
                    </md-slide-toggle>
                </td>
            </tr>
            </tbody>
        </table>
        <div class="row">
            <div class="form-group col-md-1">
                <button class="btn btn-default" (click)="saveOffer(offer)">Save</button>
            </div>
            <div class="form-group col-md-1">
                <button class="btn btn-default" (click)="closeOffer()">Cancel</button>
            </div>
        </div>
    </div>
    <div *ngIf="!addingOffer">
        <table class="top-container-table">
            <thead>
            <th class="th1">Id</th>
            <th class="th2">Name</th>
            <th class="th3">Comb Type</th>
            <th class="th4">Demand ID</th>
            <th class="th5">Demand Count</th>
            <th class="th6">Benefit ID</th>
            <th class="th7">Discount</th>
            <th class="th8">Comb Max</th>
            <th class="th9">Valid From</th>
            <th class="th10">Valid To</th>
            <th class="thlast">Suspended?</th>
            </thead>
            <tbody>
            <tr *ngFor="let offer of offers" (mousedown)="onOfferSelect(offer);true"
                [class.selected]="offer.id === selectedOffer.id">
                <td class="td1">
                    <input [class.selected]="offer.id === selectedOffer.id" class="wide"
                           type="text"
                           [(ngModel)]="offer.id" readonly="true"/>
                </td>
                <td class="td2">
                    <input [class.selected]="offer.id === selectedOffer.id" class="wide" (blur)="saveOffer(offer)"
                           type="text"
                           [(ngModel)]="offer.name"/>
                </td>
                <td class="td3">
                    <input [class.selected]="offer.id === selectedOffer.id" class="wide" (blur)="saveOffer(offer)"
                           type="text"
                           [(ngModel)]="offer.combType"/>
                </td>
                <td class="td4">
                    <input [class.selected]="offer.id === selectedOffer.id" class="wide" (blur)="saveOffer(offer)"
                           type="text"
                           [(ngModel)]="offer.demandId"/>
                </td>
                <td class="td5">
                    <input [class.selected]="offer.id === selectedOffer.id" class="wide" (blur)="saveOffer(offer)"
                           type="text"
                           [(ngModel)]="offer.demandCount"/>
                </td>
                <td class="td6">
                    <input [class.selected]="offer.id === selectedOffer.id" class="wide" (blur)="saveOffer(offer)"
                           type="text"
                           [(ngModel)]="offer.benefitId"/>
                </td>
                <td class="td7">
                    <input [class.selected]="offer.id === selectedOffer.id" class="wide" (blur)="saveOffer(offer)"
                           type="text"
                           [(ngModel)]="offer.discount"/>
                </td>
                <td class="td8">
                    <input [class.selected]="offer.id === selectedOffer.id" class="wide" (blur)="saveOffer(offer)"
                           type="text"
                           [(ngModel)]="offer.combMax"/>
                </td>
                <td class="td9">
                    <input [class.selected]="offer.id === selectedOffer.id" class="wide" (blur)="saveOffer(offer)"
                           type="text"
                           [(ngModel)]="offer.validFrom"/>
                </td>
                <td class="td10">
                    <input [class.selected]="offer.id === selectedOffer.id" class="wide" (blur)="saveOffer(offer)"
                           type="text"
                           [(ngModel)]="offer.validTo"/>
                </td>
                <td class="tdlast">
                </td>
            </tr>
            <tr *ngIf="offerType[0].id != 'New' && !(offerCategory1 || offerCategory2 || offerCategory3 || offerBrand || offerPrice || offerSize)">
                <td class="tdall" colspan="11">Select at least one filter above...</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<div class="left-container">
    <div class="form-group">
        <div class="form-group">
            <label for="sel1">Category1:</label>
            <select class="form-control" id="sel1" [ngModel]="category1" (ngModelChange)="onCategory1Select($event)">
                <option *ngFor="let category of category1values">{{category}}</option>
            </select>
            <label for="sel2">Category2:</label>
            <select class="form-control" id="sel2" [ngModel]="category2" (ngModelChange)="onCategory2Select($event)">
                <option *ngFor="let category of category2values">{{category}}</option>
            </select>
            <label for="sel3">Category3:</label>
            <select class="form-control" id="sel3" [ngModel]="category3" (ngModelChange)="onCategory3Select($event)">
                <option *ngFor="let category of category3values">{{category}}</option>
            </select>
        </div>
        <div class="input-group">
             <span class="input-group-addon">
                 <label>Not Offered Products?</label>
                <input type="checkbox" [(ngModel)]="unoffered" (ngModelChange)="onUnofferedSelect($event)">
            </span>
        </div>
    </div>
    <h2 *ngIf="!unoffered && !category1">Products</h2>
    <h2 *ngIf="unoffered && !category1">Not Offered Products</h2>
    <h2 *ngIf="unoffered && category1">Not Offered Products in Category: {{category1}}</h2>
    <h2 *ngIf="!unoffered && category1">Products in Category: {{category1}}</h2>
    <table class="table table-striped left-container-table">
        <thead>
        <th class="zero">Id</th>
        <th class="first">Name</th>
        <th class="second">Category</th>
        <th class="third">Offer</th>
        <th class="fourth">PIM Activated</th>
        <th class="fifth"></th>
        <th class="last"></th>
        </thead>
        <tbody>
        <tr *ngFor="let product of products" (mousedown)="onProductSelect(product);true"
            [class.selected]="product.id === selectedProduct.id"
            [class.available]="product.offer === ''">
            <td class="zero">
                <input [class.selected]="product.id === selectedProduct.id" class="wide"
                       type="text"
                       readonly="true" [(ngModel)]="product.id"/>
            </td>
            <td class="first">
                <input [class.selected]="product.id === selectedProduct.id" class="wide"
                       type="text"
                       [(ngModel)]="product.name" (blur)="saveProduct(product)"/>
            </td>
            <td class="second">
                <input [class.selected]="product.id === selectedProduct.id" class="wide"
                       type="text"
                       [(ngModel)]="product.category1" (blur)="saveProduct(product)"/>
            </td>
            <td class="third">
                <input [class.selected]="product.id === selectedProduct.id" class="wide"
                       type="text"
                       [(ngModel)]="product.offer" (blur)="saveProduct(product)"/>
            </td>
            <td class="fourth">
                <input
                        type="checkbox"
                        [(ngModel)]="product.activatedPim" (ngModelChange)="onActiveChange($event, product)"/>
            </td>
            <td class="fifth"></td>
            <td class="last"><a class="middle" *ngIf="selectedOffer.id != '' && product.offer == ''"
                                (click)="assignSelectedOffer(product)"><img src="images/arrow_right.png"/></a></td>
        </tr>
        <tr *ngIf="!category1 && !unoffered">
            <td colspan="4" style="text-align: center">Select Category/Not Offered</td>
        </tr>
        </tbody>
    </table>
</div>
<div class="right-container2">
    <h2 *ngIf="selectedOffer.id == ''">Offer Products</h2>
    <h2 *ngIf="selectedOffer.id != ''">Offer Products: {{selectedOffer.name}}</h2>
    <div>
        <table class="table table-striped right-container2-table">
            <thead>
            <th class="zero">Id</th>
            <th class="first">Name</th>
            <th class="second">Category</th>
            <th class="third">Offer</th>
            <th class="fourth">PIM Activated</th>
            <th class="fifth"></th>
            <th class="last"></th>
            </thead>
            <tbody>
            <tr *ngFor="let product of offerProducts">
                <td class="zero">
                    <input [class.selected]="product.id === selectedProduct.id" class="wide"
                           type="text"
                           [(ngModel)]="product.id" readonly="true"/>
                </td>
                <td class="first">
                    <input [class.selected]="product.id === selectedProduct.id" class="wide"
                           type="text"
                           [(ngModel)]="product.name" (blur)="saveProduct(product)"/>
                </td>
                <td class="second">
                    <input [class.selected]="product.id === selectedProduct.id" class="wide"
                           type="text"
                           [(ngModel)]="product.category1" (blur)="saveProduct(product)"/>
                </td>
                <td class="third">
                    <input [class.selected]="product.id === selectedProduct.id" class="wide"
                           type="text"
                           [(ngModel)]="product.offer" (blur)="saveProduct(product)"/>
                </td>
                <td class="fourth">
                    <input
                            type="checkbox"
                            [(ngModel)]="product.activatedPim" (ngModelChange)="onActiveChange($event, product)"/>
                </td>
                <td class="fifth"></td>
                <td class="last"></td>
            </tr>
            <tr *ngIf="selectedOffer.id == ''">
                <td colspan="4" style="text-align: center">Select Offer</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
